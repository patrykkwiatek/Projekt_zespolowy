<!DOCTYPE html>
<html lang="pl-PL" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Strona leku</title>
  <style>
    body {
     background-color: whitesmoke;
     margin: 0;
     font-family: Arial, sans-serif;
     }

     /* Główny kontener */
     #mainContainer {
         position: sticky;
         top: 0;
         width: 100%; /* Zajmuje całą szerokość okna */
         display: flex;
         flex-direction: column;
         background-color: white;
         z-index: 1000;
         margin: 0 auto;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
     }

     /* Menu górne */
     #topMenu {
         display: flex;
         align-items: center;
         gap: 20px;
         width: 100%; /* Rozciąga się na całą szerokość */
         flex-wrap: wrap; /* Zezwala na łamanie wierszy */
         padding: 10px 20px; /* Dodaje wewnętrzne odstępy */
         box-sizing: border-box; /* Wlicza padding do szerokości */
     }

     /* Logo */
     #logo {
         max-width: 100px;
         width: auto;
     }

     /* Wyszukiwarka */
     #wyszukiwarka {
         display: flex;
         align-items: center;
         flex-grow: 1;
         margin-left: auto;
     }

     #wyszukiwarka input {
         padding: 10px;
         width: 100%;
         max-width: 400px;
         font-size: 16px;
         border-radius: 4px;
         margin-right: 10px;
         border-color: #c90606;
     }

     #wyszukiwarka button {
         padding: 10px;
         font-size: 16px;
         background-color: #c90606;
         color: white;
         border-radius: 4px;
         width: 100px;
         transition: all 0.4s ease;
     }

     #wyszukiwarka button:hover {
         background-color: white;
         color: #c90606;
         cursor: pointer;
     }
     #wyszukiwarka form {
    display: flex;
    width: 100%;
    gap: 10px;
}

     /* Panel logowania */
     .panelLogowania {
         display: flex;
         align-items: center;
         gap: 10px;
         margin-left: auto;
         position: relative;
     }

     /* Główne przyciski logowania */
     .panelLogowania button {
         padding: 10px;
         font-size: 16px;
         background-color: #c90606;
         color: white;
         border-radius: 4px;
         width: 110px;
         transition: all 0.4s ease;
     }

     .panelLogowania button:hover {
         background-color: white;
         color: #c90606;
         cursor: pointer;
     }

     /* Dropdown - ukryte menu */
     .ukryteLogowanie {
         position: relative;
     }

     .ukryteLogowanie-content {
         display: none;
         position: absolute;
         top: 100%;
         left: 50%;
         transform: translateX(-50%);
         background-color: white;
         border: 1px solid #c90606;
         border-radius: 8px;
         box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
         padding: 10px 4px;
         z-index: 1000;
         width: 250px;
     }

     .ukryteLogowanie-content button {
         display: block;
         width: 210px !important;
         margin: 10px auto;
         padding: 12px;
         font-size: 14px;
         background-color: #c90606;
         border: 1px solid #c90606;
         border-radius: 6px;
         text-align: center;
         transition: all 0.4s ease;
     }

     .ukryteLogowanie-content button:hover {
         background-color: white;
         color: #c90606;
         cursor: pointer;
     }

     .ukryteLogowanie:hover .ukryteLogowanie-content {
         display: block;
     }

     /* Avatar */
     #avatar {
         max-width: 60px;
         width: 100%;
         border-radius: 50%;
     }

     /* Separator */
     #line {
         width: 100%;
         height: 3px;
         background-color: #c90606;
     }

     /* Menu nawigacyjne (Top2Menu) */
     #top2Menu {
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 40px;
         width: 100%; /* Rozciąga na całą szerokość */
         background-color: #c90606;
         padding: 10px 0;
         box-sizing: border-box;
     }

     #top2Menu button {
         padding: 10px;
         font-size: 16px;
         background-color: #c90606;
         color: white;
         border: 1px solid #c90606;
         border-radius: 4px;
         transition: all 0.4s ease;
     }

     #top2Menu button:hover {
         background-color: white;
         color: #c90606;
         cursor: pointer;
     }

     /* Media queries dla responsywności */
     @media (max-width: 768px) {
         #topMenu {
             flex-wrap: wrap;
         }

      #wyszukiwarka input {
              max-width: 100%;
         }

         #panelLogowania {
             flex-wrap: wrap;
             gap: 20px;
         }

         #top2Menu {
             flex-direction: column;
             gap: 20px;
         }
     }
     /* Styl kontenera menu */
     .menu-item {
         position: relative;
      display: inline-block;
     }

     .container {
         width: 90%;
         max-width: 1200px;
         background-color: #ffffff;
         border-radius: 12px;
         box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
         padding: 20px;
         margin: 40px auto 60px auto; /* przerwa pod nagłówkiem + wyśrodkowanie */
     }


     .header {
         text-align: center;
         margin-bottom: 20px;
     }

     .product-details {
         display: flex;
         gap: 20px;
     }

     .product-image img {
         width: 300px;
         border-radius: 8px;
     }

     .product-info {
         flex: 1;
     }

     .price {
         color: #c90606;
         font-size: 24px;
         font-weight: bold;
         margin: 10px 0;
     }
     .card-btn {
         padding: 5px 10px;
         font-size: 16px;
         background-color: #c90606;
         color: white;
         border-radius: 4px;
         border: none;
         cursor: pointer;
         transition: all 0.4s ease;
         height: 36px;
     }
     .card__counter {
         display: flex;
         align-items: center;
         justify-content: center;
         gap: 10px;
         padding: 5px 10px;
         background: #F7F7F7;
         border-radius: 50px;
         width: fit-content;
         height: 36px;
     }

     .card-btn:hover {
         background-color: white;
         color: #c90606;
     }
     .card__btn {
         display: flex;
         justify-content: center;
         align-items: center;
         width: 36px;
         height: 36px;
         font-size: 12px;
         font-weight: bold;
         border-radius: 50%;
         border: none;
         background: #ddd;
         color: var(--main-color);
         cursor: pointer;
         transition: background 0.3s ease;
         padding: 0;
     }

     .card__btn:hover {
         background: #ccc;
     }

     .card__btn-plus {
         background: #ddd; /* lub np. var(--main-color) jeśli chcesz czerwony */
         color: var(--main-color);
     }

     .card__counter-score {
         width: 50px;
         height: 36px;
         font-size: 16px;
         text-align: center;
         border: 1px solid #ccc;
         border-radius: 8px;
         background-color: #fff;
         padding: 0;
     }
     .product-info form {
         display: flex;
         align-items: center;
         gap: 10px; /* odstęp między licznikiem a przyciskiem */
         flex-wrap: wrap; /* jeśli chcesz, żeby na małych ekranach się zawijało */
     }
  </style>
</head>
<body>
<div id="line"></div>
<div id = "mainContainer">

  <div id="topMenu">
    <a href="/Neuca/start"><img src="/img/logo.png" id="logo"></a>
    <div id="wyszukiwarka">
      <form th:action="@{/Neuca/buy}" method="get">
        <input type="text" id="search" name="wzorzec" placeholder="Wyszukaj...">
        <button id="searchButton">Szukaj</button>
      </form>
    </div>
    <div class="panelLogowania" th:if="${not log}">
      <div class="ukryteLogowanie">
        <button id="loginButton" onclick="location.href='/Neuca/login'">Zaloguj</button>
      </div>
      <div class="ukryteLogowanie">
        <button id="registerButton">Zarejestruj</button>
        <div class="ukryteLogowanie-content">
          <button id="pacjentRegister" onclick="location.href='/Neuca/rejestracjaPacjent'">Zarejestruj jako Pacjent</button>
          <button id="aptekarzRegister" onclick="location.href='/Neuca/rejestracjaAptekarz'">Zarejestruj jako Aptekarz</button>
          <button id="lekarzRegister" onclick="location.href='/Neuca/rejestracjaLekarz'">Zarejestruj jako Lekarz</button>

        </div>
      </div>
    </div>
    <div class="panelLogowania" th:if="${log}">
      <div class="ukryteLogowanie">
        <button id="koszyk" onclick="location.href='/Neuca/koszyk'">Koszyk</button>
      </div>
      <div class="ukryteLogowanie">
        <button id="mojeKonto" onclick="location.href='/Neuca/mojProfilPacjent'">Moje Konto</button>
      </div>
      <div class="ukryteLogowanie">
        <button id="wyloguj" onclick="location.href='/Neuca/logout'">Wyloguj</button>
      </div>
    </div>
    <img src="/img/avatar.png" id="avatar">
  </div>
  <div id="top2Menu">
    <div class="menu-item"><button onclick="location.href='/Neuca/lekarze'">Lekarze</button></div>

    <div class="menu-item">
      <button id="aptecsButton" onclick="location.href='/Neuca/apteka'">Apteki</button>
    </div>

    <div class="menu-item">
      <button id="servicesButton" onclick="location.href='/Neuca/uslugi'">Usługi</button>

    </div>

    <div class="menu-item">
      <button id="medicinesButton" onclick="location.href='/Neuca/buy'">Leki</button>

    </div>

    <div class="menu-item">
      <button id="contactButton" onclick="location.href='/Neuca/kontakt'">Kontakt</button>

    </div>

    <div class="menu-item">
      <div class="menu-item"><button onclick="location.href='/Neuca/oNas'">O Nas</button></div>

    </div>
  </div>




</div>
<div class="container">
  <div class="header">
    <h1 th:text="${lek.name}"></h1>
  </div>

  <div class="product-details">
    <div class="product-image">
      <img th:src="@{/Neuca/images/{filename}(filename=${#strings.substring(lek.sciezka, lek.sciezka.lastIndexOf('/') + 1)})}" alt="Zdjęcie leku XYZ">
    </div>

    <div class="product-info">
      <p><strong>Gramatura:</strong> <span th:text="${lek.gramatura}"></span></p>
      <p><strong>Opis:</strong> <span th:text="${lek.desc}"></span></p>
      <p><strong>Skład:</strong> <span th:text="${lek.sklad}"></span> </p>
      <p><strong>Dawkowanie:</strong> <span th:text="${lek.dawkowanie}"></span> </p>
      <p><strong>Minimalny wiek:</strong> <span th:text="${lek.minWiek}"></span> </p>
      <p><strong>Maksymalny wiek:</strong> <span th:text="${lek.maxWiek}"></span> </p>
      <p><strong>Rodzaj leku:</strong> <span th:text="${lek.rodzajLeku}"></span> </p>
      <p><strong>Marka leku:</strong> <span th:text="${lek.markaLeku}"></span> </p>
      <p class="price" th:text="'Cena: '+${lek.cenaString}"></p>
      <form th:action="@{/Neuca/dodanoKoszyk}" method="get">
        <div class="card__counter">
          <button type="button" class="card__btn">-</button>
          <input type="number" class="card__counter-score" name="ilosc" value="1" min="1">
          <button type="button" class="card__btn card__btn-plus">+</button>

          <input type="hidden" name="lekId" th:value="${lek.id}">
        </div>
        <button type ="submit" class="card-btn">Dodaj do koszyka</button>
      </form>
    </div>
  </div>


</div>
<script>
  const counter = document.querySelector('.card__counter');
  if (counter) {
      const input = counter.querySelector('.card__counter-score');
      const btnMinus = counter.querySelector('.card__btn:not(.card__btn-plus)');
      const btnPlus = counter.querySelector('.card__btn-plus');

      btnMinus.addEventListener('click', () => {
          let value = parseInt(input.value) || 1;
          if (value > parseInt(input.min)) {
              input.value = value - 1;
          }
      });

      btnPlus.addEventListener('click', () => {
          let value = parseInt(input.value) || 1;
          input.value = value + 1;
      });
  }
</script>

</body>
</html>
